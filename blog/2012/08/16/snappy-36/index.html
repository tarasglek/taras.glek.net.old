
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Snappy #36 - All About Performance</title>
  <meta name="author" content="Taras Glek">

  
  <meta name="description" content="Misc I have been using dates to mark passage of time in the Snappy project. I think I&#8217;ll switch to a simple counter instead. We are ~36 updates &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://taras.glek.net/blog/2012/08/16/snappy-36/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="All About Performance" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">All About Performance</a></h1>
  
    <h2>and other stuff by Taras Glek</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">All RSS</a></li>
  
  <li><a href="/blog/categories/mozilla/atom.xml" rel="subscribe-rss" title="subscribe via RSS">Mozilla RSS</a></li>
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Snappy #36</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-16T07:24:19-07:00" pubdate data-updated="true">Aug 16<span>th</span>, 2012</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><strong>Misc</strong></p>

<p>I have been using dates to mark passage of time in the Snappy project. I think I&#8217;ll switch to a simple counter instead. We are ~36 updates into this project.</p>

<p><strong>Blogging</strong></p>

<p>Ludovic Hirlimann <a href="http://sietch-tabr.tumblr.com/post/29404692899/firefox-cache-and-spotlight">blogged</a> about how spotlight spends a lot of time indexing the Firefox network &#8216;Cache&#8217; directory (known problem, bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=718910">718910</a>). If you experience this problem and would like to see it fixed, please comment in the bug if the <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=718910#c13">suggested remedy</a> helps.</p>

<p>Tim Taubert <a href="http://timtaubert.de/blog/2012/08/snappy-fixing-new-tab-page-performance-regressions/">wrote</a> about reducing new-tab jank. I mention Tim a lot in these updates. He takes on a lot of interesting bugs in Firefox frontend. Hopefully he&#8217;ll make a habit out of blogging about his work.</p>

<p><strong>Networking</strong></p>

<p>Nick Hurley landed a change to reduce our maximum cache size to 350 megabytes. In order to avoid excessive disk IO traffic old cache size of 1 gigabyte remains in effect until the cache is reset. See bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=709297">709297</a> and Nick&#8217;s <a href="http://todesschaf.org/posts/2012/07/25/cache-usage-results.html">blog post</a> for more details. Progress is also being made on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=777328">bug 777328</a> so we can move towards not blowing away our cache 10-20% of the time.</p>

<p>Michal Novotny is proceeding with incrementally reducing cache-caused jank that&#8217;s due to holding a lock on the main thread while doing IO on a background thread. He also removing a multitude of synchronous necko APIs, see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=695399">bug 695399</a>.</p>

<p>Patrick McManus is removing synchronous proxy-related code, see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=766973">bug 766973</a> for the DNS-related bit. Turns out our proxy code also does all kinds of synchronous operations when detecting proxy configuration, etc. This is being worked on, but hasn&#8217;t been filed yet.</p>

<p>I usually try to highlight work that has already landed, but in this case it is important to point out that the Necko team is working hard on addressing significant problems in the networking code. These problems are tricky and will take a while to fix. The team is relatively new and is still discovering hidden surprises in their codebase.</p>

<p><strong>Profiler</strong></p>

<p>Benoit Girard posted a <a href="http://dl.dropbox.com/u/10523664/Screenshots/5p.png">preview </a>of view-source in the profiler. This will be handy for figuring out where performance problems lay, especially in JS files that have been preprocessed (our JS preprocessor does not try to keep the line numbers sane).</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Taras Glek</span></span>

      








  


<time datetime="2012-08-16T07:24:19-07:00" pubdate data-updated="true">Aug 16<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/mozilla/'>mozilla</a>, <a class='category' href='/blog/categories/snappy/'>snappy</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://taras.glek.net/blog/2012/08/16/snappy-36/" data-via="tarasglek" data-counturl="http://taras.glek.net/blog/2012/08/16/snappy-36/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/08/15/dxr-is-back-at-dxr-mozilla-org/" title="Previous Post: DXR is back at dxr.mozilla.org">&laquo; DXR is back at dxr.mozilla.org</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/08/16/trilite-fast-string-matching-in-sqlite/" title="Next Post: TriLite, Fast String Matching in Sqlite">TriLite, Fast String Matching in Sqlite &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/12/17/hello-octopress/">Hello Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/26/coping-with-flash-hangs/">Coping with Flash hangs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/16/snappy-44-fixing-tab-switching-in-vancouver/">Snappy #44: Fixing tab switching in Vancouver</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/05/snappy-43-big-improvements-faster-startup-smoother-tabstrip/">Snappy #43: Big improvements: faster startup? Smoother tabstrip!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/26/snappy-42/">Snappy #42</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("tarasglek", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/tarasglek" class="twitter-follow-button" data-show-count="false">Follow @tarasglek</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Taras Glek -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'allaboutperformance-tarasglek';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://taras.glek.net/blog/2012/08/16/snappy-36/';
        var disqus_url = 'http://taras.glek.net/blog/2012/08/16/snappy-36/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
